<!DOCTYPE html>
<html><head><title>Puvut</title>
<style type="text/css">
body {background:#000;}
</style>
<script type="text/javascript">
/** header **/
(function(){
window.addEventListener('load',function(){
  var
  w = window,
  isInFullScreen = false,
  _resizer = w.addEventListener('resize',function(){
    if(isInFullScreen){return;}
    window.removeEventListener(_resizer);
    setTimeout( function(){window.location.reload(true);}, 500 );
  }),
  d = window.document,
  b = d.body,
  u = undefined,
  svgNS = 'http://www.w3.org/2000/svg',
  now = function(){ return new Date().getTime(); },
/** elemutil **/
  setStyles = function(e,style){
    for( var k in style ){
      e.style[k] = style[k];
    }
  },
  setAttrs = function(e,attrs){
    for( var k in attrs ){
      if( k === 'style' ){ continue; }
      v = attrs[k];
      e.setAttribute( k, v )
    }
    if( attrs.style ){
      setStyles( e, attrs.style );
    }
  },
  createElem = function(p,type,attrs){
    if( p === u ){ p = b; }
    if( type === u ){ type = 'div'; }
    var e = d.createElement(type);
    if( attrs !== u ){
      setAttrs(e,attrs);
    }
    p.appendChild( e );
    return e;
  },
  createElemNS = function(p,type,ns,attrs){
    if( p === u ){ p = b; }
    if( type === u ){ type = 'div'; }
    var e = d.createElementNS(ns,type);
    if( attrs !== u ){
      setAttrs(e,attrs);
    }
    p.appendChild( e );
    return e;
  },
  removeElem = function(elem){
    elem.parentNode.removeChild(elem);
  },
/** svgutil **/
  createSVG = function(p,rect,viewBox,allowFullScreen){
    if(!rect){
      rect = [0,0,320,320];
    }
    if(!viewBox){
      viewBox = '0 0 320 320';
    }
    var
    x = rect[0],
    y = rect[1],
    w = rect[2],
    h = rect[3],
    elem = createElemNS( b, 'svg', svgNS, {
      style: {
        left: x+'px', top: y+'px',
        width: w+'px', height: h+'px'
      },
      xmlns: svgNS,
      viewBox: viewBox,
      preserveAspectRatio: 'xMidYMid slice',
      version: '1.1',
      allowFullScreen: allowFullScreen
    });
    if( allowFullScreen ){
      document.body.addEventListener('click',function(){
        // window.removeEventListener(_resizer);
        setTimeout(function(){
          var
          rect = svgRectFn(),
          x = rect[0],
          y = rect[1],
          w = rect[2],
          h = rect[3];
          setStyles( elem, {
            left: x+'px', top: y+'px',
            width: w+'px', height: h+'px',
            backgroundColor: '#000'
          } );
          isInFullScreen = false;
          console.log(rect);
        }, 200 );
        if(!isInFullScreen){
          isInFullScreen = true;
          if (elem.mozRequestFullScreen) {
            elem.mozRequestFullScreen();
          }
          else if (elem.webkitRequestFullScreen) {
            elem.webkitRequestFullScreen();
          }
          else if (elem.requestFullScreen) {
            elem.requestFullScreen();
          }
        }
      });
    }
    return elem;
  },
  svgPathMatch = {
    instr: /([a-zA-Z])([\-0-9]+?),([0-9]+?)/,
    coord: /([0-9]+?),([\-0-9]+?)/
  },
  _processSVGCoords = function( path, fn ){
    var
    scalePath = [],
    splitPath = path.split(' '),
    chr, instr, coords, i, x, y;
    for( i in splitPath ){
      instr = splitPath[i];
      if( instr == 'z' ){
        scalePath.push( instr );
      }
      else if( svgPathMatch.instr.test( instr ) ){
        chr = instr[0];
        coords = instr.slice(1).split(',');
        scalePath.push( chr+fn(parseInt(coords[0],10),parseInt(coords[1]),10) );
      }
      else if( svgPathMatch.coord.test( instr ) ){
        coords = instr.split(',');
        scalePath.push( fn(parseInt(coords[0],10),parseInt(coords[1],10)) );
      }
      else{
        console.warn('undefined instr:',instr);
      }
    }
    return scalePath.join(' ');
  },
  transSVGPath = function( path, offset, scale ){
    if(!offset){ offset = [0,0]; }
    if(!scale){  scale  = 1.0; }
    var
    offsetX = offset[0],
    offsetY = offset[1];
    return _processSVGCoords( path, function(x,y){
      x = Math.round( parseInt(x)*scale ) + offsetX;
      y = Math.round( parseInt(y)*scale ) + offsetY;
      return x.toString()+','+y.toString();
    });
  },
  horizFlipSVGPath = function(path,w){
    if(!w){ w=320; }
    var _out = _processSVGCoords( path, function(x,y){
      x = w-x;
      return x.toString()+','+y.toString();
    } );
    return _out;
  },
  scaleSVGPath = function( path, scale ){
    return transSVGPath( path, null, scale );
  },
  offsetSVGPath = function( path, offset ){
    return transSVGPath( path, offset, null );
  },
  svgRectFn = function(){
    var
    rect = [ 0,0,640,360 ],
    w = window.innerWidth,
    h = window.innerHeight,
    asp = Math.round(w/h*10);
    if( asp < 18 ){
      rect[2] = w;
      rect[3] = Math.round( w/1.777 );
    }
    else {
      rect[2] = Math.round( h*1.777 );
      rect[3] = h;
    }
    return rect;
  },
  svgRect = svgRectFn(),
  createSVGAnim = function( elem, begin, dur, repeat, attr, values ){
    return createElemNS( elem, 'animate', svgNS, {
      begin: begin+'ms',
      dur: dur+'ms',
      repeatCount: repeat,
      attributeName: attr,
      values: values
    } );
  },
  setSVGAttrs = function( elem, attrs ){
    for( var i in attrs ){
      elem.setAttributeNS( null, i, attrs[i] );
    }
  },
  createSVGRotAnim = function( parent, begin, dur, repeat, deg0, deg1, x, y ){
    var parBB = parent.getBBox();
    if( x == null ){ x = parBB.x+parBB.width/2 }
    if( y == null ){ y = parBB.y+parBB.height/2 }
    return createElemNS( parent, 'animateTransform', svgNS, {
      attributeName: 'transform',
      attributeType: 'XML',
      type: 'rotate',
      begin: begin+'ms',
      dur: dur+'ms',
      repeatCount: repeat,
      from: deg0+' '+x+' '+y,
      to: deg1+' '+x+' '+y
    } );
  },
  createSVGScaleAnim = function( parent, begin, dur, repeat, scale0, scale1 ){
    var
    parBB = parent.getBBox(),
    x = parBB.x+parBB.width/2,
    y = parBB.y+parBB.height/2;
    return createElemNS( parent, 'animateTransform', svgNS, {
      attributeName: 'transform',
      attributeType: 'XML',
      type: 'scale',
      begin: begin+'ms',
      dur: dur+'ms',
      repeatCount: repeat,
      from: scale0,
      to: scale1
    } );
  },
  createSVGMoveAnim = function( parent, begin, dur, repeat, from, to ){
    return createElemNS( parent, 'animateTransform', svgNS, {
      attributeName: 'transform',
      attributeType: 'XML',
      type: 'translate',
      begin: begin+'ms',
      dur: dur+'ms',
      repeatCount: repeat,
      from: from,
      to: to
    } );
  },
  createSVGPath = function( parent, path, stroke, strokeWidth, fill ){
    var attr = {
      d: path,
      'stroke-linecap': 'round'
    };
    if( stroke != null ){ attr.stroke = stroke; }
    if( strokeWidth != null ){ attr['stroke-width'] = strokeWidth; }
    if( fill != null ){ attr.fill = fill }
    return createElemNS( parent, 'path', svgNS, attr );
  },
  createSVGGroup = function( parent, attr ){
    return createElemNS( parent, 'g', svgNS, attr );
  },
  createSVGGroup2 = function( parent, attr ){
    return createElemNS( parent, 'svg', svgNS, attr );
  },
/** animdata **/
  frames =   {
    "bunny_base": [
      [
        "M59,94 L79,74 L99,64 L80,44 L78,16 L95,37 L108,62 L117,64 L123,34 L139,14 L136,40 L125,73 L139,94 L199,64 L249,74 L259,44 L276,53 L279,64 L269,84 L259,84 L239,124 L256,189 L193,198 L188,188 L234,175 L179,134 L156,139 L152,164 L177,188 L169,194 L136,170 L129,144 L109,114 L79,124 L59,114 L59,94 z"
      ],
      [
        "M41,103 L61,83 L81,73 L62,53 L59,25 L76,46 L89,71 L99,73 L105,43 L121,23 L118,49 L106,82 L121,103 L181,73 L231,83 L241,53 L257,62 L261,73 L251,93 L241,93 L221,133 L237,198 L174,207 L169,197 L215,184 L161,143 L137,148 L134,173 L158,197 L151,203 L118,179 L111,153 L91,123 L61,133 L41,123 L41,103 z"
      ]
    ],
    "bunny_dramatic": [
      [
        "M115,221 L125,182 L145,164 L165,130 L133,149 L109,152 L124,128 L171,111 L185,104 L208,107 L227,107 L243,167 L239,179",
        "M223,128 L225,148 L236,173 L243,188 L243,221",
        "M178,123 L189,128 L194,124 L192,119 L190,111 L182,111 L178,124",
        "M215,129 L223,126 L222,115 L215,113 L211,124 L215,129 z",
        "M179,161 L196,157 L198,148 L189,139 L201,140 L216,142 L201,148 L203,157 L212,165 L200,160 L179,161 z"
      ],
      [
        "M10,332 L30,251 L70,215 L112,145 L47,184 L-2,191 L28,140 L124,107 L150,93 L198,98 L236,99 L267,220 L261,245",
        "M228,141 L232,182 L255,232 L267,263 L267,332",
        "M136,132 L160,141 L170,133 L166,122 L160,107 L145,107 L136,132",
        "M211,144 L228,138 L225,114 L211,112 L204,132 L211,144 z",
        "M139,208 L172,200 L177,182 L158,164 L183,165 L214,169 L184,183 L187,200 L205,217 L182,207 L139,208 z"
      ],
      [
        "M-169,490 L-128,324 L-45,251 L39,108 L-93,186 L-194,202 L-131,98 L64,30 L119,1 L216,11 L294,13 L359,262 L345,313",
        "M278,98 L285,184 L333,287 L359,350 L359,490",
        "M89,80 L138,98 L158,84 L151,61 L139,30 L108,30 L89,82",
        "M242,105 L278,92 L272,45 L242,39 L228,82 L242,105 z",
        "M96,238 L164,221 L173,183 L135,147 L185,149 L249,157 L188,185 L194,220 L231,256 L183,234 L96,238 z"
      ]
    ],
    "bunny_eats": [
      [
        "M51,137 L66,100 L82,89 L88,65 L117,18 L119,63 L95,88 L105,89 L141,61 L177,51 L149,86 L112,99 L145,131 L204,132 L237,160 L270,218 L288,208 L292,233 L285,249 L271,249 L242,269 L195,271 L119,272 L119,261 L168,258 L171,210 L118,181 L84,196 L78,213 L63,206 L74,178 L112,153 L94,149 L75,159 L59,151 L51,137 z"
      ],
      [
        "M51,164 L57,124 L70,110 L74,76 L88,32 L95,77 L82,106 L92,106 L119,75 L155,52 L135,91 L102,113 L141,138 L199,126 L237,146 L282,195 L298,181 L307,205 L304,222 L290,225 L276,248 L222,266 L146,265 L144,251 L213,247 L175,212 L122,197 L105,220 L99,233 L86,228 L90,207 L112,171 L95,167 L79,181 L62,176 L51,164 z"
      ],
      [
        "M59,194 L62,154 L79,137 L85,112 L110,58 L111,96 L91,136 L104,135 L130,98 L157,71 L149,115 L112,139 L136,153 L185,137 L231,134 L287,169 L298,151 L314,171 L315,189 L303,196 L276,251 L237,264 L169,266 L166,252 L225,246 L198,222 L138,216 L128,241 L124,267 L112,264 L113,231 L118,188 L103,193 L94,206 L73,209 L59,194 z"
      ],
      [
        "M54,210 L56,184 L63,162 L77,116 L111,90 L101,123 L78,151 L86,153 L112,130 L151,101 L130,143 L98,157 L130,160 L178,135 L218,119 L281,139 L297,115 L312,130 L310,158 L297,162 L302,189 L264,258 L170,261 L170,247 L226,243 L198,218 L137,223 L130,245 L136,270 L120,271 L110,243 L121,198 L105,204 L84,226 L66,224 L54,210 z"
      ],
      [
        "M52,214 L49,171 L64,151 L70,118 L96,76 L90,122 L75,154 L86,153 L109,118 L136,85 L128,129 L100,155 L130,159 L174,133 L217,118 L276,144 L285,129 L301,133 L308,152 L287,159 L293,185 L263,256 L170,263 L174,251 L219,240 L190,210 L136,222 L129,248 L133,266 L120,270 L115,242 L117,203 L98,192 L80,228 L66,216 L52,214 z"
      ],
      [
        "M52,214 L49,171 L64,151 L70,118 L96,76 L90,122 L75,154 L86,153 L109,118 L136,85 L128,129 L100,155 L130,159 L174,133 L217,118 L276,144 L285,129 L301,133 L308,152 L287,159 L293,185 L263,256 L170,263 L174,251 L219,240 L190,210 L136,222 L129,248 L133,266 L120,270 L115,242 L117,203 L98,192 L76,222 L63,220 L52,214 z"
      ]
    ],
    "bunny_fuckers": [
      [
        "M37,219 L35,180 L50,159 L61,125 L87,84 L81,129 L61,163 L72,162 L100,127 L126,97 L119,139 L86,164 L116,168 L160,141 L210,137 L269,164 L278,148 L294,152 L301,171 L280,179 L286,204 L250,265 L156,272 L160,260 L205,249 L177,227 L122,231 L115,257 L119,275 L106,279 L101,250 L103,212 L84,201 L62,231 L49,229 L37,219 z",
        "M150,137 L165,100 L181,89 L187,65 L216,18 L218,63 L194,88 L204,89 L240,61 L276,51 L248,86 L211,99 L244,131 L303,132 L336,160 L369,218 L387,208 L391,233 L384,249 L370,249 L341,269 L293,270 L218,272 L217,260 L267,258 L270,210 L217,181 L183,196 L176,212 L162,206 L173,178 L211,153 L193,149 L174,159 L158,151 L150,137 z"
      ],
      [
        "M37,219 L35,180 L50,159 L55,122 L81,84 L75,130 L63,159 L72,162 L93,126 L116,93 L111,141 L86,164 L117,173 L160,141 L210,137 L269,164 L278,148 L294,152 L301,171 L280,179 L286,204 L250,265 L156,272 L160,260 L206,242 L177,232 L127,236 L115,257 L119,272 L106,279 L101,250 L97,216 L85,208 L62,231 L49,229 L37,219 z",
        "M151,122 L163,99 L177,82 L181,47 L205,7 L211,49 L190,81 L200,83 L227,53 L267,28 L241,71 L212,94 L229,122 L297,134 L328,162 L365,211 L380,208 L387,222 L387,238 L369,237 L337,262 L289,264 L219,272 L216,258 L263,251 L265,197 L213,174 L184,190 L178,203 L166,200 L173,174 L207,146 L189,143 L170,153 L154,144 L151,122 z"
      ]
    ],
    "bunny_hop": [
      [
        "M65,137 L82,116 L102,106 L81,90 L76,46 L101,74 L110,104 L119,104 L118,70 L139,43 L142,82 L128,109 L142,136 L211,129 L257,140 L262,129 L279,139 L285,161 L273,165 L262,154 L247,190 L259,231 L196,240 L191,230 L237,217 L184,210 L159,182 L155,206 L180,230 L172,236 L139,212 L132,186 L112,156 L90,163 L69,154 L65,137 z"
      ],
      [
        "M67,104 L73,84 L85,68 L105,30 L139,19 L122,45 L99,62 L112,62 L131,43 L163,30 L148,58 L123,67 L159,87 L201,36 L249,44 L249,16 L266,21 L270,31 L269,49 L263,58 L257,101 L258,132 L282,192 L272,199 L234,137 L205,107 L171,142 L122,162 L112,191 L100,191 L106,157 L140,140 L117,109 L99,123 L77,121 L67,104 z"
      ],
      [
        "M69,136 L81,122 L102,109 L93,82 L97,48 L111,81 L110,107 L119,108 L133,83 L167,64 L151,96 L128,113 L142,139 L207,125 L253,133 L268,122 L279,124 L282,145 L273,155 L259,153 L242,176 L257,198 L228,248 L215,245 L232,203 L180,195 L159,185 L145,218 L136,249 L120,250 L129,218 L132,189 L112,159 L85,164 L70,154 L69,136 z"
      ],
      [
        "M67,138 L82,116 L102,106 L81,85 L77,50 L102,71 L110,104 L119,104 L122,72 L141,42 L142,82 L128,109 L142,136 L203,129 L257,140 L262,129 L279,139 L282,158 L272,166 L262,154 L247,190 L259,231 L196,240 L191,230 L237,217 L184,210 L159,182 L155,206 L180,230 L172,236 L139,212 L132,186 L112,156 L89,162 L70,154 L67,138 z"
      ]
    ],
    "bunny_hoptoass": [
      [
        "M60,144 L70,131 L90,121 L78,88 L79,51 L97,79 L98,119 L107,119 L107,81 L127,52 L134,82 L116,124 L135,145 L212,141 L245,152 L255,142 L272,145 L273,167 L258,173 L250,166 L244,203 L248,244 L185,253 L180,243 L225,230 L173,223 L145,196 L144,220 L139,252 L127,251 L128,225 L128,192 L101,170 L77,174 L59,164 L60,144 z"
      ],
      [
        "M59,131 L72,113 L92,103 L78,70 L78,33 L100,61 L101,101 L111,101 L112,65 L132,39 L135,71 L120,106 L135,130 L194,144 L243,168 L254,155 L270,161 L271,183 L256,189 L248,182 L236,207 L235,244 L172,253 L167,243 L213,230 L158,216 L132,187 L129,212 L140,237 L128,240 L113,212 L111,173 L102,153 L80,157 L67,148 L59,131 z"
      ],
      [
        "M60,149 L66,125 L86,109 L75,73 L88,34 L97,74 L96,108 L105,110 L107,71 L129,41 L133,81 L112,112 L137,144 L183,160 L219,186 L244,231 L254,214 L269,222 L274,238 L256,248 L242,250 L179,261 L111,261 L117,246 L162,247 L149,219 L107,186 L97,205 L92,227 L78,224 L83,192 L108,165 L98,160 L85,168 L68,166 L60,149 z"
      ]
    ],
    "bunny_ihme": [
      [
        "M40,152 L54,115 L70,104 L76,80 L106,33 L107,79 L83,103 L93,105 L129,77 L166,66 L137,101 L100,114 L133,147 L192,148 L226,175 L259,233 L277,223 L281,248 L273,264 L259,264 L230,284 L183,286 L107,288 L107,276 L156,273 L159,226 L107,196 L72,212 L66,228 L51,222 L62,194 L101,168 L82,165 L63,175 L48,166 L40,152 z"
      ],
      [
        "M49,142 L64,105 L80,94 L85,70 L115,23 L117,68 L93,93 L103,95 L139,66 L175,56 L147,91 L110,104 L143,136 L192,148 L226,175 L259,226 L277,216 L281,241 L273,257 L259,257 L230,284 L183,286 L107,288 L107,276 L156,273 L159,226 L117,188 L83,204 L76,220 L62,214 L73,186 L110,158 L92,154 L73,164 L57,156 L49,142 z"
      ],
      [
        "M79,102 L96,86 L115,69 L100,45 L114,1 L133,43 L127,70 L137,72 L139,44 L159,1 L163,43 L144,81 L170,118 L198,147 L226,175 L259,226 L277,216 L281,241 L273,257 L259,257 L230,284 L183,286 L107,288 L107,276 L156,273 L159,226 L130,186 L104,191 L97,207 L83,201 L94,173 L139,146 L120,128 L93,134 L79,122 L79,102 z"
      ],
      [
        "M72,109 L96,86 L114,70 L102,46 L93,1 L125,44 L126,71 L136,73 L137,40 L141,1 L163,43 L144,81 L170,118 L198,147 L226,175 L259,226 L281,217 L285,242 L277,258 L259,257 L230,284 L183,286 L107,288 L107,276 L156,273 L159,226 L130,186 L108,186 L105,206 L87,202 L92,177 L139,146 L120,128 L93,134 L79,122 L72,109 z"
      ]
    ],
    "bunny_leap": [
      [
        "M70,136 L84,116 L100,109 L103,72 L135,48 L123,86 L109,107 L117,107 L133,83 L162,60 L154,92 L126,112 L140,139 L206,146 L257,142 L262,131 L279,140 L284,158 L276,162 L262,156 L247,192 L258,233 L195,241 L190,232 L236,219 L184,211 L157,185 L155,208 L179,232 L172,238 L139,214 L132,188 L110,159 L89,165 L73,156 L70,136 z"
      ],
      [
        "M71,102 L78,76 L86,60 L98,35 L145,19 L124,43 L98,61 L111,61 L131,44 L168,32 L149,58 L121,66 L159,87 L201,36 L249,44 L252,21 L266,21 L270,31 L269,47 L263,58 L257,101 L258,132 L282,192 L271,200 L234,137 L205,107 L171,142 L122,162 L112,191 L101,187 L106,157 L140,140 L117,109 L102,118 L84,118 L71,102 z"
      ],
      [
        "M74,85 L84,71 L104,54 L119,26 L170,11 L139,37 L112,60 L119,62 L147,40 L193,31 L164,56 L132,63 L159,73 L212,57 L270,50 L287,35 L302,31 L308,40 L298,54 L283,64 L277,107 L285,133 L321,176 L317,187 L258,142 L214,131 L153,146 L115,166 L89,177 L84,169 L109,150 L133,125 L125,109 L95,110 L78,100 L74,85 z"
      ],
      [
        "M76,134 L86,118 L101,106 L128,71 L163,70 L139,89 L110,107 L119,108 L147,86 L183,92 L155,109 L127,113 L141,139 L211,126 L253,133 L267,122 L279,124 L282,145 L273,155 L259,153 L242,176 L263,202 L228,246 L214,241 L232,203 L180,195 L158,185 L144,218 L136,249 L123,250 L129,218 L131,189 L111,159 L93,163 L76,155 L76,134 z"
      ]
    ],
    "bunny_leapfucker": [
      [
        "M641,120 L648,94 L656,78 L668,53 L715,37 L694,61 L667,80 L680,80 L701,62 L738,50 L719,76 L691,84 L729,106 L771,54 L819,62 L822,39 L836,39 L839,50 L839,65 L832,76 L826,119 L828,150 L852,210 L840,218 L803,155 L775,125 L740,160 L691,181 L682,209 L671,205 L676,175 L710,158 L687,127 L672,136 L654,136 L641,120 z"
      ],
      [
        "M517,140 L527,126 L547,109 L562,81 L613,66 L582,92 L555,115 L562,117 L590,95 L636,86 L607,111 L575,118 L602,128 L655,112 L713,105 L730,90 L745,86 L751,95 L741,109 L726,118 L720,162 L728,188 L764,231 L760,242 L701,197 L657,186 L596,201 L558,221 L532,232 L527,224 L552,205 L576,180 L568,164 L538,165 L521,155 L517,140 z"
      ],
      [
        "M429,151 L439,135 L454,123 L481,88 L516,87 L492,106 L463,124 L472,125 L500,103 L536,109 L508,126 L481,129 L495,156 L564,143 L606,149 L621,139 L632,141 L635,162 L626,171 L613,170 L595,193 L616,219 L581,262 L567,258 L585,220 L533,212 L512,202 L498,235 L489,266 L476,267 L482,235 L485,206 L465,176 L446,180 L429,172 L429,151 z"
      ],
      [
        "M401,153 L413,139 L434,127 L425,99 L429,65 L443,98 L442,125 L451,125 L465,100 L499,81 L483,114 L459,130 L474,157 L539,142 L585,150 L599,139 L611,141 L614,163 L605,172 L591,171 L574,193 L589,215 L560,265 L547,262 L564,220 L512,213 L490,202 L476,235 L468,266 L452,267 L461,236 L464,207 L444,177 L417,181 L402,171 L401,153 z"
      ],
      [
        "M334,160 L345,130 L358,122 L362,103 L386,65 L387,102 L368,121 L376,122 L405,100 L433,92 L411,120 L382,130 L408,155 L454,156 L481,178 L507,224 L521,216 L524,236 L519,249 L508,249 L484,264 L447,266 L387,267 L387,258 L426,255 L428,218 L387,195 L359,207 L354,220 L343,215 L351,193 L382,172 L367,170 L352,178 L340,171 L334,160 z"
      ],
      [
        "M279,127 L298,109 L312,97 L303,78 L296,43 L321,76 L322,98 L330,100 L330,73 L333,43 L351,76 L336,106 L356,134 L378,157 L400,179 L425,219 L443,211 L446,231 L440,243 L426,243 L403,264 L366,266 L307,267 L307,258 L345,256 L348,219 L325,187 L308,187 L305,203 L291,200 L295,180 L332,156 L317,142 L296,147 L285,137 L279,127 z"
      ]
    ],
    "bunny_loopeater": [
      [
        "M34,201 L30,158 L45,137 L52,104 L77,63 L72,109 L56,141 L67,140 L91,104 L117,72 L109,116 L81,142 L111,146 L156,119 L199,105 L257,131 L267,116 L283,119 L290,138 L269,146 L274,171 L245,242 L151,250 L156,238 L200,226 L172,202 L118,209 L110,235 L114,253 L101,257 L96,228 L98,189 L80,179 L61,215 L47,203 L34,201 z"
      ],
      [
        "M34,201 L30,158 L45,137 L52,104 L77,63 L72,109 L56,141 L67,140 L91,104 L117,72 L109,116 L81,142 L111,146 L156,119 L199,105 L257,131 L267,116 L283,119 L290,138 L269,146 L274,171 L245,242 L151,250 L156,238 L200,226 L172,197 L118,209 L110,235 L114,253 L101,257 L96,228 L98,189 L80,179 L57,208 L44,206 L34,201 z"
      ]
    ],
    "bunny_nuusku": [
      [
        "M54,125 L78,102 L96,86 L84,62 L75,17 L107,60 L108,87 L118,89 L119,56 L123,17 L145,59 L126,97 L152,134 L180,163 L208,191 L241,242 L263,233 L267,258 L259,274 L241,273 L212,300 L165,302 L89,304 L89,292 L138,289 L141,242 L112,202 L90,202 L87,222 L69,218 L74,193 L121,162 L102,144 L75,150 L61,138 L54,125 z"
      ],
      [
        "M60,118 L77,102 L96,85 L81,61 L86,17 L114,59 L108,86 L118,88 L120,60 L129,17 L144,59 L125,97 L151,134 L179,163 L207,191 L240,242 L258,232 L262,257 L254,273 L240,273 L211,300 L164,302 L88,304 L88,292 L137,289 L140,242 L111,202 L85,207 L78,223 L64,217 L75,189 L120,162 L101,144 L74,150 L60,138 L60,118 z"
      ]
    ],
    "fract_tree": [
      [
        "M159,321 L156,156",
        "M92,106 L156,160 L202,111",
        "M48,120 L92,106 L84,58",
        "M197,64 L202,111 L233,120",
        "M39,156 L52,120 L34,111",
        "M64,51 L84,58 L101,39",
        "M175,50 L197,64 L215,46",
        "M254,100 L233,120 L245,139",
        "M43,171 L39,156 L26,156",
        "M26,120 L34,111 L34,100",
        "M52,58 L64,51 L64,28",
        "M101,22 L101,39 L118,46",
        "M159,58 L175,50 L175,28",
        "M215,28 L215,46 L233,52",
        "M254,80 L254,100 L271,106",
        "M261,139 L245,139 L238,156"
      ]
    ],
    "iso_sieni": [
      [
        "M141,160 L133,189 L138,213 L156,226 L173,225 L188,212 L187,189 L178,161 L195,160 L218,156 L206,124 L184,104 L154,95 L127,106 L108,130 L102,158 L118,161 L141,160 z"
      ]
    ],
    "kanttis": [
      [
        "M122,127 L142,118 L164,123 L196,119 L199,131 L183,138 L172,149 L167,200 L157,202 L157,151 L141,135 L122,127 z"
      ]
    ],
    "kivi1": [
      [
        "M125,215 L114,195 L147,160 L181,169 L208,163 L224,190 L228,211 C125,216 125,215 125,215 z"
      ]
    ],
    "kivi2": [
      [
        "M144,167 L155,149 L170,151 L176,158 L174,167 L162,172 L144,167 z"
      ]
    ],
    "kivi3": [
      [
        "M169,139 L145,140 L128,160 L133,176 L188,181 L192,161 L169,139 z"
      ]
    ],
    "klingonstarship": [
      [
        "M130,97 L90,83 L153,79 L208,122 L209,134 L218,140 L210,145 L209,162 L57,158 L62,141 L75,141 L85,145 L114,144 L131,138 L153,117 L130,97 z",
        "M128,222 L151,204 L130,181 L114,174 L85,172 L75,175 L62,175 L58,158 L209,162 L210,178 L218,184 L208,189 L207,201 L149,241 L86,234 L128,222 z"
      ]
    ],
    "pikkusieni": [
      [
        "M155,112 L140,125 L137,142 L155,135 L149,204 L159,209 L171,208 L176,201 L167,134 L183,142 L181,129 L172,117 L155,112 z"
      ]
    ],
    "pikkusieni_lives": [
      [
        "M155,112 L140,125 L137,142 L155,135 L149,204 L159,209 L171,208 L176,201 L167,134 L183,142 L181,129 L172,117 L155,112 z"
      ],
      [
        "M155,106 L137,123 L137,146 L151,140 L149,203 L158,208 L170,208 L176,201 L168,141 L183,142 L183,126 L175,112 L155,106 z"
      ],
      [
        "M154,111 L140,125 L136,141 L155,135 L149,203 L158,208 L170,208 L176,201 L166,134 L182,142 L180,128 L171,117 L154,111 z"
      ],
      [
        "M155,109 L136,126 L136,149 L151,143 L148,206 L158,211 L170,211 L175,204 L168,144 L182,145 L182,129 L165,122 L155,109 z"
      ],
      [
        "M155,109 L136,126 L136,149 L151,143 L148,206 L158,211 L170,211 L175,204 L168,144 L168,144 L169,129 L165,122 L155,109 z"
      ],
      [
        "M155,109 L136,126 L136,147 L151,141 L148,204 L158,209 L170,208 L175,201 L168,142 L168,142 L169,127 L159,131 L155,109 z"
      ],
      [
        "M156,131 L140,127 L140,147 L154,141 L152,204 L162,209 L174,209 L179,202 L171,142 L171,142 L173,127 L163,131 L156,131 z"
      ]
    ],
    "puku": [
      [
        "M144,94 L107,73 L94,97 L130,119 L144,94 z",
        "M159,119 L144,94 L179,73 L192,96 L159,119 z",
        "M144,94 L144,236",
        "M149,134 C148,134 147,133 147,132 C147,130 148,129 149,129 C151,129 152,130 152,132 C152,133 151,134 149,134 z",
        "M149,167 C148,167 147,166 147,164 C147,163 148,162 149,162 C151,162 152,163 152,164 C152,166 151,167 149,167 z",
        "M149,200 C148,200 147,199 147,197 C147,196 148,195 149,195 C151,195 152,196 152,197 C152,199 151,200 149,200 z",
        "M30,119 L94,97 L30,119 z",
        "M30,119 L21,260",
        "M192,97 L258,119 L267,268",
        "M30,119 L56,148 L67,262",
        "M258,119 L231,155 L221,262",
        "M94,97 L73,110 L82,115 L70,127 L144,240 L94,97 z",
        "M192,97 L208,112 L200,115 L212,126 L139,256 L192,97 z",
        "M139,256 L139,268",
        "M148,266 C146,266 145,265 145,263 C145,261 146,260 148,260 C150,260 151,261 151,263 C151,265 150,266 148,266 z"
      ]
    ],
    "rusetti": [
      [
        "M61,111 L121,81 L121,41 L121,81 L161,81 L161,41 L161,41 L161,81 L221,111 L221,11 L161,41 L121,41 L61,11 L61,111 z"
      ],
      [
        "M61,82 L126,135 L126,111 L126,135 L150,135 L150,111 L150,111 L150,135 L221,82 L183,11 L150,111 L126,111 L105,11 L61,82 z"
      ],
      [
        "M92,112 L131,215 L126,190 L131,215 L144,215 L150,190 L150,190 L144,215 L185,112 L165,90 L150,190 L126,190 L110,90 L92,112 z"
      ],
      [
        "M125,205 L131,228 L127,204 L131,228 L144,228 L151,204 L151,204 L144,228 L153,205 L153,203 L151,204 L126,204 L126,203 L125,205 z"
      ]
    ],
    "rusetti_still": [
      [
        "M61,111 L121,81 L121,41 L121,81 L161,81 L161,41 L161,41 L161,81 L221,111 L221,11 L161,41 L121,41 L61,11 L61,111 z"
      ]
    ],
    "taimi": [
      [
        "M151,221 L151,221 L151,221 L151,231 L151,221 L151,221 L151,221 L151,221 L151,221 L151,221 L151,221 z"
      ],
      [
        "M160,114 L160,124 L150,114 L151,231 L150,114 L140,124 L140,114 L150,114 L150,114 L150,114 L160,114 z"
      ],
      [
        "M211,11 L231,51 L151,51 L151,231 L151,51 L71,51 L91,11 L151,51 L151,51 L151,51 L211,11 z"
      ]
    ],
    "taimi2": [
      [
        "M144,240 L145,157 L108,157 L75,122 L114,120 L145,153 L169,120 L216,120 L183,157 L145,156"
      ]
    ],
    "taimi2kasvaa": [
      [
        "M143,239 L145,230 L145,233 L143,236 L143,232 L144,231 L147,233 L146,237 L149,231 L145,233"
      ],
      [
        "M143,239 L145,212 L139,211 L138,200 L143,188 L145,209 L147,189 L151,197 L155,206 L146,212"
      ],
      [
        "M143,239 L144,156 L108,157 L74,121 L113,119 L144,153 L169,120 L216,119 L182,156 L145,156"
      ]
    ],
    "taimi_gets_eaten": [
      [
        "M144,240 L145,157 L108,157 L75,122 L114,120 L145,153 L169,120 L216,120 L183,157 L145,156"
      ],
      [
        "M144,240 L145,157 L122,181 L82,183 L110,149 L145,153 L164,120 L170,130 L177,137 L145,156"
      ],
      [
        "M150,210 L166,139 L128,144 L109,149 L130,124 L166,136 L163,135 L166,134 L165,136 L167,139"
      ],
      [
        "M150,171 L166,139 L136,143 L120,148 L133,140 L166,136 L163,135 L166,134 L165,136 L167,139"
      ],
      [
        "M151,150 L166,139 L146,152 L151,152 L149,150 L166,136 L163,135 L166,134 L165,136 L167,139"
      ]
    ]
  },
/** bunnyanim **/
Bunny = (function(){
  var BunnyObj = function(path,x,y,scale){
    console.log('hi');
    this.draw();
  };
  BunnyObj.prototype = {
    draw: function(){
      console.log('draw');
    }
  };
  return BunnyObj;
})(),
/** colors **/
  colors = {
    plant0: [ '#fff', '#390' ],
    tree0: [ '#390' ],
    bunny0: [ '#fff', 'rgb(144,95,48)' ],
    bunny1: [ '#fff', 'rgb(120,109,103)' ],
    bunny2: [ '#fff', 'rgb(235,226,191)' ],
  },
/** timeline0 **/
  next = 'wait',
  // skipTo = false,
  skipTo = 'plant',
  firstNext = next,
  prevKill,
  prevItem,
  runTime = 0,
  devel = true, // enable debug texts
  timerStarted,
  timerElem,
  createTimer = function(){
    if(!devel){return null;}
    timerStarted = now();
    timerElem = createElem(b,'div');
    setStyles( timerElem, {
      zIndex: 10000,
      fontSize: '20px',
      color: '#fff',
      position: 'absolute',
      right: 0, bottom: 0,
      height: '20px',
      fontFamily: 'sans-serif'
    });
    var updateTimer = function(){
      var timeNow = now();
      timerElem.innerText = (timeNow-timerStarted)+'ms';
    };
    devel && setInterval( updateTimer, 50 );
  },
  endTimeElem = (function(){
    if(!devel){return null;}
    var elem = createElem(b,'div');
    setStyles( elem, {
      zIndex: 10001,
      fontSize: '20px',
      lineHeight: '20px',
      height: '20px',
      color: '#fff',
      position: 'absolute',
      right: 0, bottom: '20px',
      fontFamily: 'sans-serif'
    } );
    return elem;
  })(),
  timelineElem = (function(){
    if(!devel){return null;}
    var elem = createElem(b,'div');
    setStyles( elem, {
      zIndex: 10002,
      fontSize: '20px',
      lineHeight: '20px',
      height: '40px',
      color: '#fff',
      position: 'absolute',
      left: 0, bottom: 0,
      fontFamily: 'sans-serif'
    } );
    return elem;
  })(),
  itemStart = 0,
  itemTime = 0,
  endTime = 0,
  svgDoc = createSVG( b, svgRect, '0,0,1280,720', true ),
  nextStep = function(){
    // console.log(svgDoc.getCurrentTime());
    var
    start = now(), end, took,
    item,
    timelineText,
    prevNext = next,
    kill;
    itemStart = start;
    if( next ){
      item = timeline[next];
      // devel && console.log('start time of ',next,': ',(now()-timerStarted));
      endTime = item.time;
      itemTime = endTime;
      devel && (timelineText = 'item: '+next);
      next = item.next;
      devel && (timelineText += '<br>next: '+next);
      devel && (timelineElem.innerHTML = timelineText);
      if( !skipTo || prevNext == skipTo ){
        if( skipTo ){
          skipTo = false;
          svgDoc.setCurrentTime(runTime/1000);
          timeline.music.currentTime = svgDoc.getCurrentTime()-6.4;
          timeline.music.play();
        }
        else if( prevNext == 'load' ){
          setTimeout( function(){
            timeline.music.play();
          }, 1400 );
        }
        kill = item.init(Math.round(svgDoc.getCurrentTime()*1000));
        if( prevKill ){
          setTimeout( prevKill, 50 );
          prevKill = null;
        }
        if( kill ){
          prevKill = kill;
        }
      }
      prevItem = item;
    }
    else {
      return;
    }

    if( !endTime ){
      endTime = 0;
    }

    if(skipTo){
      endTime-=10;
      runTime += endTime;
      timerStarted -= endTime;
      setTimeout( nextStep, 10 );
    }
    else {
      end = now(); took = end-start;
      endTime -= took - 10;
      if( endTime < 10 ){ endTime = 10; }
      runTime += endTime;
      devel && (
        endTimeElem.innerHTML = (
          ' start: ' + (itemStart-timerStarted) +
          ' dur: ' + itemTime +
          ' end: '+runTime)+'ms'
        );
      setTimeout( nextStep, endTime );
    }
  };
  timeline = {
    musicLoaded: false,
    music: (function(){
      var
      music = createElem( b, 'audio', { src: 'mc_misse-muukalaiswewd.mp3' } );
      music.volume = 0;
      music.play();
      music.addEventListener('canplay',function(){
        if( timeline.musicLoaded ){return;}
        timeline.musicLoaded = true;
        console.log('canplay');
        music.pause();
        setTimeout( function(){
          music.volume = 1;
          music.currentTime=0;
          svgDoc.setCurrentTime(0);
          createTimer();
          nextStep();
        }, 1000 );
      });
      return music;
    })(),
/** load **/
    wait: {
      time: 5000,
      next: 'load',
      init: function(){
        console.log(svgDoc.style.height);
        var
        elem = createElem(b,'div');
        elem.innerHTML = 'click to enter fullscreen!';
        setStyles( elem, {
          position: 'absolute',
          top: 0, left: 0, right: 0,
          color: 'white',
          fontFamily: 'sans-serif',
          height: svgDoc.style.height,
          lineHeight: (parseInt(svgDoc.style.height,10)*0.5)+'px',
          fontSize: (parseInt(svgDoc.style.height,10)*0.25)+'px',
          textAlign: 'center',
          verticalAlign: 'middle'
        } );
        return function(){
          removeElem(elem);
        }
      }
    },
    load: {
      // does the suit and tie thing
      init: function(t){
        var
        _this = this,
        paths = frames.puku[0],
        elems = [],
        anims = [],
        i, path, elem, rusetti, ruAnims = [];
        for( i in paths ){
          path = transSVGPath( paths[i], [ 190, -55 ], 3 );
          elem = createSVGPath( svgDoc, path, '#000', 4 );
          elems.push( elem );
          anims.push( createSVGAnim( elem, t, 1000, 0, 'd',
            offsetSVGPath( path, [ 0, 720 ] )+';'+path+';' ) );
          anims.push( createSVGAnim( elem, t, 6000, 0, 'stroke',
            '#fff;#fff;' ) );
          anims.push( createSVGAnim( elem, t+6000, 1000, 0, 'stroke',
            '#fff;#000;' ) );
        }
        path = transSVGPath( frames.rusetti_still[0][0], [ 480, 210 ], 1 );
        rusetti = createSVGPath( svgDoc, path, '#fff', 4, '#c33' );
        this.rusetti = rusetti;
        this.ruAnims = ruAnims;
        var
        ruPath1 = transSVGPath( path, [ 0, 0 ], 1 );
        ruPath2 = transSVGPath( path, [ -620, -280 ], 2 );
        ruAnims.push( createSVGAnim( rusetti, t+4500, 500, 'indefinite', 'd',
          ruPath1+';'+ruPath2+';'+ruPath1 ) );
        anims.push( createSVGAnim( rusetti, t, 1500, 0, 'd',
          offsetSVGPath( path, [ 0, -600 ] )+';'+path+';' ) );
        ruAnims.push( createSVGRotAnim( rusetti, t+1500, 1000, 0, 0, 30 ) );
        ruAnims.push( createSVGRotAnim( rusetti, t+2500, 2000, 0, 30, -30 ) );
        ruAnims.push( createSVGRotAnim( rusetti, t+4500, 1000, 0, -30, 60 ) );
        ruAnims.push( createSVGRotAnim( rusetti, t+5500, 1000, 0, 60, -90 ) );
        ruAnims.push( createSVGRotAnim( rusetti, t+6500, 500, 0, -90, 90 ) );
        ruAnims.push( createSVGRotAnim( rusetti, t+7000, 1800, 'indefinite', 90, 1170 ) );
        return function(){
          for( i in anims ){ removeElem( anims[i] ); }
          for( i in elems ){ removeElem( elems[i] ); }
        };
      },
      time: 7000,
      next: 'intro'
    },
/** intro **/
    // add text and stuff here, while the tie is spinning
    intro: {
      init: function(t){
        var
        _init = prevItem,
        i,
        rusetti = _init.rusetti,
        ruPath  = _init.ruPath,
        ruAnims = _init.ruAnims;
        return function(){
          for( i in ruAnims ){ removeElem( ruAnims[i] ); }
          removeElem( rusetti );
        };
      },
      time: 21000,
      next: 'plant'
    },
/** plant **/
    // morphs the tie into a seed
    plant: {
      init: function(t){
        var
        paths = frames.rusetti,
        path0 = transSVGPath( paths[0][0], [ 480, 210 ], 1 ),
        path1 = transSVGPath( paths[1][0], [ 400, 350 ], 1.5 ),
        path2 = transSVGPath( paths[2][0], [ 340, 340 ], 2 ),
        path3 = transSVGPath( paths[3][0], [ 410, 410 ], 1.5 ),
        path4 = transSVGPath( paths[3][0], [ 410, 480 ], 1.5 ),
        elem = createSVGPath( svgDoc, path0, '#fff', 4, '#c30' ),
        anim = createSVGAnim( elem, t+100, 1000, 0, 'd', [
            path0,
            path1,
            path2,
            path3,
            path4
          ].join(';')+';'
        ),
        anim2 = createSVGAnim( elem, t, 1800, 0, 'fill',
          '#c33;#c63;#673;#c93;#c33;'
        ),
        anim3 = createSVGAnim( elem, t, 1000, 0, 'stroke',
          '#fff;#000;'
        ),
        elems = [elem],
        anims = [anim,anim2,anim3],
        i;
        return function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
      },
      time: 1100,
      next: 'plant2'
    },
/** plant2 **/
    // grows the plant
    plant2: {
      time: 4000,
      next: 'plant3',
      init: function(t){
        var
        paths = frames.taimi2kasvaa,
        elem, anim,
        path0 = transSVGPath( paths[0][0], [ 480, 450 ], 1 ),
        path1 = transSVGPath( paths[1][0], [ 480, 450 ], 1 ),
        path2 = transSVGPath( paths[2][0], [ 480, 450 ], 1 ),
        bpath0 = transSVGPath( paths[0][0], [ 280, 450 ], 1 ),
        bpath1 = transSVGPath( paths[1][0], [ 280, 450 ], 1 ),
        bpath2 = transSVGPath( paths[2][0], [ 280, 450 ], 1 ),
        elems = [],
        anims = [],
        i;
        elems.push( createSVGPath( svgDoc, path2, '#fff', 4, '#390' ) );
        anims.push( createSVGAnim( elems[0], t, 4200, 0, 'd', [
            path0,
            path1,
            path2
          ].join(';')+';'
        ) );
        elems.push( createSVGPath( svgDoc, bpath0, '#fff', 4, '#390' ) );
        anims.push( createSVGAnim( elems[1], t+1000, 3200, 0, 'd', [
            bpath0,
            bpath1,
            bpath2
          ].join(';')+';'
        ) );
        return function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
      }
    },
/** plant3 **/
    // shows the plant
    plant3: {
      time: 1000,
      next: 'pupuentry',
      init: function(t){
        var
        paths = frames.taimi2kasvaa,
        path0 = transSVGPath( paths[2][0], [ 480, 450 ], 1 );
        bpath0 = transSVGPath( paths[2][0], [ 280, 450 ], 1 );
        this.bplant = createSVGPath( svgDoc, bpath0, '#fff', 4, colors.plant0[1] );
        this.plant = createSVGPath( svgDoc, path0, '#fff', 4, colors.plant0[1] );
        return function(){
        };
      }
    },
/** pupuentry **/
    // shows the bunny
    pupuentry: {
      time: 3000,
      next: 'pupueat',
      init: function(t){
        var
        paths = frames.bunny_hop,
        elem, anim, i,
        path0 = transSVGPath( paths[0][0], [ -100, -30 ], 1.6 ),
        path1 = transSVGPath( paths[1][0], [ -100, -30 ], 1.6 ),
        path2 = transSVGPath( paths[2][0], [ -100, -30 ], 1.6 ),
        path3 = transSVGPath( paths[3][0], [ -100, -30 ], 1.6 ),
        group = createSVGGroup( svgDoc, {
          transform: 'translate(1280,330)'
        } ),
        elems = [
          group,
          createSVGPath( group, path0, colors.bunny0[0], 4, colors.bunny0[1] )
        ],
        anims = [
          createSVGAnim( elems[1], t, 1100, 3, 'd', [
            path0,
            path1,
            path2,
            path3
          ].join(';')+';' ),
          createSVGMoveAnim( elems[0], t, 3000, 0, '1280,330', '470,330' )
        ],
        i;
        return function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
      }
    },
/** pupueat **/
    // pupu sits to eat
    pupueat: {
      time: 1600,
      next: 'pupueat2',
      init: function(t){
        var
        paths = frames.bunny_hoptoass,
        elem, anim, i,
        path0 = transSVGPath( paths[0][0], [ -100, -30 ], 1.5 ),
        path1 = transSVGPath( paths[1][0], [ -100, -30 ], 1.5 ),
        path2 = transSVGPath( paths[2][0], [ -100, -30 ], 1.5 ),
        group = createSVGGroup( svgDoc, {
          transform: 'translate(470,320)'
        } ),
        elems = [
          group,
          createSVGPath( group, path2, colors.bunny0[0], 4, colors.bunny0[1] )
        ],
        anims = [
          createSVGAnim( elems[1], t, 1600, 0, 'd', [
            path0,
            path1,
            path2
          ].join(';')+';' )
        ],
        i;
        return function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
      }
    },
/** pupueat2 **/
    // pupu sits to eat
    pupueat2: {
      time: 1100,
      next: 'pupueat3',
      init: function(t){
        removeElem( timeline.plant3.bplant );
        timeline.pupurun2.init(t,true);
        var
        paths = frames.bunny_eats, elem, anim, i,
        path0 = transSVGPath( paths[0][0], [ -120, -20 ], 1.33 ),
        path1 = transSVGPath( paths[1][0], [ -120, -20 ], 1.33 ),
        path2 = transSVGPath( paths[2][0], [ -120, -20 ], 1.33 ),
        path3 = transSVGPath( paths[3][0], [ -120, -20 ], 1.33 ),
        path4 = transSVGPath( paths[4][0], [ -120, -20 ], 1.33 ),
        path5 = transSVGPath( paths[5][0], [ -120, -20 ], 1.33 ),
        group = createSVGGroup( svgDoc, {
          transform: 'translate(475,330)'
        } ),
        elems = [
          group,
          createSVGPath( group, path5, colors.bunny0[0], 4, colors.bunny0[1] )
        ],
        anims = [
          createSVGAnim( elems[1], t, 1100, 0, 'd', [
            path0,
            path1,
            path2,
            path3,
            path4,
            path5
          ].join(';')+';' )
        ],
        i,
        plantpath0 = transSVGPath( frames.taimi_gets_eaten[0][0], [ 280, 450 ], 1 ),
        plantpath1 = transSVGPath( frames.taimi_gets_eaten[1][0], [ 280, 450 ], 1 ),
        plantpath2 = transSVGPath( frames.taimi_gets_eaten[2][0], [ 280, 450 ], 1 ),
        plantpath3 = transSVGPath( frames.taimi_gets_eaten[3][0], [ 280, 450 ], 1 ),
        plantpath4 = transSVGPath( frames.taimi_gets_eaten[4][0], [ 280, 450 ], 1 );
        this.plant = createSVGPath( svgDoc, plantpath0, '#fff', 4, colors.plant0[1] );
        this.plantanim = createSVGAnim( this.plant, t, 1100, 0, 'd', [
            plantpath0,
            plantpath1,
            plantpath2,
            plantpath3,
            plantpath4
          ].join(';')+';'
        );
        var _this = this;
        setTimeout( function(){
          removeElem( _this.plant );
          removeElem( _this.plantanim );
        }, 1050 );

        return function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
      }
    },
/** pupueat3 **/
    // pupu sits to eat
    pupueat3: {
      time: 1800,
      next: 'pupueat4',
      init: function(t){
        var
        paths = frames.bunny_loopeater,
        elem, anim, i,
        path0 = transSVGPath( paths[0][0], [ -120, -20 ], 1.33 ),
        path1 = transSVGPath( paths[1][0], [ -120, -20 ], 1.33 ),
        group = createSVGGroup( svgDoc, {
          transform: 'translate(495,345)'
        } ),
        elems = [
          group,
          createSVGPath( group, path1, colors.bunny0[0], 4, colors.bunny0[1] )
        ],
        anims = [
          createSVGAnim( elems[1], t, 200, 'indefinite', 'd', [
            path0,
            path1
          ].join(';')+';' )
        ],
        i;
        return function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
      }
    },
/** pupueat4 **/
    pupueat4: {
      time: 1100,
      next: 'pupueat5',
      init: function(t){
        setTimeout( timeline.pupurun2.init(t,true), 500 );
        var
        paths = frames.bunny_eats, elem, anim, i,
        path5 = transSVGPath( paths[0][0], [ -120, -20 ], 1.33 ),
        path4 = transSVGPath( paths[1][0], [ -120, -20 ], 1.33 ),
        path3 = transSVGPath( paths[2][0], [ -120, -20 ], 1.33 ),
        path2 = transSVGPath( paths[3][0], [ -120, -20 ], 1.33 ),
        path1 = transSVGPath( paths[4][0], [ -120, -20 ], 1.33 ),
        path0 = transSVGPath( paths[5][0], [ -120, -20 ], 1.33 ),
        group = createSVGGroup( svgDoc, {
          transform: 'translate(475,330)'
        } ),
        elems = [
          group,
          createSVGPath( group, path5, colors.bunny0[0], 4, colors.bunny0[1] )
        ],
        anims = [
          createSVGAnim( elems[1], t, 1100, 0, 'd', [
            path0,
            path1,
            path2,
            path3,
            path4,
            path5
          ].join(';')+';' )
        ],
        i;
        return function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
      }
    },
    pupueat5: {
      time: 1200,
      next: 'pupuexit',
      init: function(t){
        var
        paths = frames.bunny_hoptoass,
        elem, anim, i,
        path2 = transSVGPath( paths[0][0], [ -100, -30 ], 1.5 ),
        path1 = transSVGPath( paths[1][0], [ -100, -30 ], 1.5 ),
        path0 = transSVGPath( paths[2][0], [ -100, -30 ], 1.5 ),
        group = createSVGGroup( svgDoc, {
          transform: 'translate(470,320)'
        } ),
        elems = [
          group,
          createSVGPath( group, path2, colors.bunny0[0], 4, colors.bunny0[1] )
        ],
        anims = [
          createSVGAnim( elems[1], t, 1200, 0, 'd', [
            path0,
            path1,
            path2
          ].join(';')+';' )
        ],
        i;
        return function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
      }
    },
/** pupuexit **/
    // shows the bunny
    pupuexit: {
      time: 3000,
      next: 'fractal',
      init: function(t){
        var
        paths = frames.bunny_hop,
        elem, anim, i,
        path0 = transSVGPath( paths[0][0], [ -100, -30 ], 1.6 ),
        path1 = transSVGPath( paths[1][0], [ -100, -30 ], 1.6 ),
        path2 = transSVGPath( paths[2][0], [ -100, -30 ], 1.6 ),
        path3 = transSVGPath( paths[3][0], [ -100, -30 ], 1.6 ),
        group = createSVGGroup( svgDoc, {
          transform: 'translate(1280,330)'
        } ),
        elems = [
          group,
          createSVGPath( group, path0, colors.bunny0[0], 4, colors.bunny0[1] )
        ],
        anims = [
          createSVGAnim( elems[1], t, 1100, 3, 'd', [
            path0,
            path1,
            path2,
            path3
          ].join(';')+';' ),
          createSVGMoveAnim( elems[0], t, 2800, 0, '470,330', '-330,330' )
        ],
        i;
        return function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
          removeElem( timeline.plant3.plant );
        };
      }
    },
/** fractal **/
    fractal: {
      time: 7000,
      next: 'forest',
      defaultTreeOpts: {
        animDraw: true,
        animSpeed: 100, // ms
        maxDepth: 11,
        colors: [
          '#531','#531','#531','#531',
          '#452','#452','#452',
          '#471','#471','#471',
          '#392','#392','#392','#392'
        ],
        animStepCalls: 2,
        animStepFn: function(){
          var
          forest = timeline.forest,
          trees = forest.trees;
          if(trees.groups.length == 22){ return; }
          var
          size  = Math.round(Math.random()*20)+30,
          x = (trees.groups.length*75-size+1500),
          y = 300-Math.round(Math.random()*50),
          // foo = (function(){console.log('size:',size)})(),
          group = createSVGGroup(forest.svg,{transform:
            'translate('+x+','+y+')'
          }),
          opts  = {
            maxDepth: Math.round(size/5.5),
            colors: [
              '#531','#531',
              '#452',
              '#471',
              '#392','#392','#392',
            ],
            animDraw: false,
            startX: 0,
            startY: 200-size,
            startLen: 10+size,
            group: group
          };
          // setStyles(group,{visibility:'hidden'});
          trees.groups.push( group );
          trees.positions.push( [x,y] );
          timeline.fractal.init(0,opts);
          // console.log('group:',group);
        },
        startX: 0,
        startY: 0,
        startLen: 150,
        startDeg: 270,
        isRandom: true
      },
      init: function(t,treeOpts){
        var fractStart = now();
        frames.fracttree = [];
        if(!treeOpts){
          treeOpts = {}
        };
        for(var tkey in this.defaultTreeOpts){
          // console.log('tkey:',tkey,' = ',this.defaultTreeOpts[tkey])
          if(treeOpts[tkey]===undefined){
            treeOpts[tkey] = this.defaultTreeOpts[tkey];
          }
        }
        if(!treeOpts.group){
          treeOpts.group = createSVGGroup(svgDoc,{transform: 'translate(640,680)'});
        }
        var
        animMs = 0,
        colors = treeOpts.colors,
        animSpeed = treeOpts.animSpeed,
        animStepCalls = treeOpts.animStepCalls,
        animStepFn = treeOpts.animStepFn,
        animDraw = treeOpts.animDraw,
        maxDepth = treeOpts.maxDepth,
        startX = treeOpts.startX,
        startY = treeOpts.startY,
        startLen = treeOpts.startLen,
        startDeg = treeOpts.startDeg,
        isRandom = treeOpts.isRandom,
        paths = [],
        elems = [],
        _anims = [],
        depth = 0,
        degToRad = Math.PI / 180.0,
        group = treeOpts.group,
        drawFract = function(_animProps){
          var
          x = _animProps[0],
          y = _animProps[1],
          x2 = _animProps[2],
          y2 = _animProps[3],
          depth = _animProps[4],
          path = 'M'+x+','+y+' L'+x2+','+y2+' z', color, width,
          color = colors[depth];
          // width = Math.round(17-depth*(depth*0.5)*0.4);
          // (width < 3) && (width = 3);
          width = maxDepth+2-depth;
          return createSVGPath( group, path, color, width )
        },
        genFract = function(nodes){
          if( depth == maxDepth ){
            return;
          }
          var
          nextNodes = [],
          node, i,
          x, y, len, deg;
          for( i in nodes ){
            node = nodes[i];
            x = node[0];
            y = node[1];
            len = node[2];
            deg = node[3];
            var
            x2 = x + Math.round(Math.cos(deg * degToRad) * len);
            y2 = y + Math.round(Math.sin(deg * degToRad) * len);
            if( animDraw ){
              _anims.push( [x,y,x2,y2,depth] );
              setTimeout( function(){
                elems.push( drawFract(_anims.shift()) );
              }, animMs );
            }
            else {
              elems.push( drawFract([x,y,x2,y2,depth]) );
            }
            len2 = len*0.8,
            rand = function(deg){
              if(!isRandom){ return deg; }
              return deg+Math.round(Math.random()*20)-10;
            }
            if( !isRandom || depth < 4 || Math.random() > 0.1){
              nextNodes.push( [x2,y2,len2,rand(deg-33)] );
            }
            if( isRandom && Math.random() > 0.8 ){
              nextNodes.push( [x2,y2,len2,rand(deg)] );
            }
            if( !isRandom || depth < 4 || Math.random() < 0.9 ){
              nextNodes.push( [x2,y2,len2,rand(deg+33)] );
            }
          }
          depth++;
          if(animDraw){
            for(var o=0;o<animStepCalls;o++){
              setTimeout( animStepFn, animMs );
            }
          }
          animMs += animSpeed;
          genFract(nextNodes);
        },
        initCoords = [[startX,startY,startLen,startDeg]];
        genFract(initCoords);
        elems.push( group );
        if(!timeline.forest.treeGroup){
          timeline.forest.treeGroup = group;
        }
        return function(){
          setStyles( group, { zIndex: 1000 } );
          // removeElem( group );
        };
      }
    },
/** forest **/
  forest: {
    time: 30000,
    next: 'pupumush',
    svg: (function(){
      setTimeout( function(){
        timeline.forest.svg = createSVGGroup(svgDoc,{
          transform:
            'translate(0,0)'
        });
        timeline.forest.svg2 = createSVGGroup(svgDoc,{
          transform:
            'translate(0,0)'
        });
      }, 0 );
    })(),
    trees: {
      groups: [],
      positions: []
    },
    bunnyThings: function(t){
      console.log('bunnyThings:',this.svg2);
    },
    init: function(t){
      var
      _this = this,
      trees = this.trees,
      positions = trees.positions,
      groups = trees.groups,
      i, tree, pos, x, xs = [], to = 7000,
      posI,
      posLen = positions.length,
      posDiffX = positions[posLen-1][0]-positions[0][0],
      anims = [],
      forestMoves = [],
      fractalGroup = this.treeGroup;
      setTimeout(function(){_this.bunnyThings(t)},10);
      anims.push(
        createSVGMoveAnim( fractalGroup, t, 12000, 0, '640,680', '-1280,680' )
      );
      setTimeout(function(){removeElem(fractalGroup);},8500);
      setSVGAttrs( this.svg, {
        transform: 'translate(-7000,0)'
      });
      anims.push(
        createSVGMoveAnim( this.svg, t, 30000, 0, '0,0', '-7000,0' )
      );
      for(i=0;i<76;i++){
        to += 300;
        posI = i%posLen;
        pos = positions[posI];
        pos[0] += posDiffX;
        forestMoves.push( [ groups[posI], pos[0], pos[1] ] );
        setTimeout( function(){
          var
          gPosXY = forestMoves.shift(),
          grp = gPosXY[0],
          x = gPosXY[1],
          y = gPosXY[2];
          setSVGAttrs( grp, {
            transform: 'translate('+x+','+y+')'
          } );
        }, to );
      }
      return function(){
        for( i in anims ){
          removeElem( anims[i] );
        }
      };
    }
  },
/** pupumush **/
  pupumush: {
    next: 'end',
    time: 150000,
    init: function(t){
      console.log('pupumush');
    }
  },
/** pupurun **/
    // pupu sits to eat
    pupurun: {
      time: 4000,
      next: 'end',
      init: function(t,selfKill,top){
        (!top) && (top = 100);
        var i, elems = [], anims = [],
        paths = frames.bunny_leap,
        lpath0 = scaleSVGPath( horizFlipSVGPath( paths[0][0] ), 0.6 ),
        lpath1 = scaleSVGPath( horizFlipSVGPath( paths[1][0] ), 0.6 ),
        lpath2 = scaleSVGPath( horizFlipSVGPath( paths[2][0] ), 0.6 ),
        lpath3 = scaleSVGPath( horizFlipSVGPath( paths[3][0] ), 0.6 ),
        rpath0 = scaleSVGPath( paths[0][0], 0.75 ),
        rpath1 = scaleSVGPath( paths[1][0], 0.75 ),
        rpath2 = scaleSVGPath( paths[2][0], 0.75 ),
        rpath3 = scaleSVGPath( paths[3][0], 0.75 ),
        group = createSVGGroup( svgDoc, {
          transform: 'translate(-330,100)'
        } ),
        group2 = createSVGGroup( svgDoc, {
          transform: 'translate(1330,150)'
        } ),
        bunny0 = createSVGPath( group, lpath0, colors.bunny0[0], 4, colors.bunny0[1] ),
        bunny1 = createSVGPath( group2, rpath0, colors.bunny0[0], 4, colors.bunny0[1] ),
        foo;
        elems.push( bunny0 );
        elems.push( bunny1 );
        elems.push( group );
        anims.push(
          createSVGAnim( bunny0, t, 1100, 'indefinite', 'd', [
            lpath0,
            lpath1,
            lpath2,
            lpath3
          ].join(';')+';' )
        );
        anims.push(
          createSVGAnim( bunny1, t, 1100, 'indefinite', 'd', [
            rpath0,
            rpath1,
            rpath2,
            rpath3
          ].join(';')+';' )
        );
        anims.push( createSVGMoveAnim( group, t, 2200, 0, '-330,'+top, '1500,'+top ) );
        anims.push( createSVGMoveAnim( group2, t+500, 2200, 0, '1330,'+(top+50), '-330,'+(top+50) ) );
        var kill = function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
        if( selfKill ){
          setTimeout( kill, 4000 );
        }
        else {
          return kill;
        }
      }
    },
    // pupu sits to eat
    pupurun2: {
      time: 4000,
      next: 'end',
      init: function(t,selfKill,top){
        (!top) && (top = 100);
        var i, elems = [], anims = [],
        paths = frames.bunny_leap,
        rpath0 = scaleSVGPath( horizFlipSVGPath( paths[0][0] ), 0.75 ),
        rpath1 = scaleSVGPath( horizFlipSVGPath( paths[1][0] ), 0.75 ),
        rpath2 = scaleSVGPath( horizFlipSVGPath( paths[2][0] ), 0.75 ),
        rpath3 = scaleSVGPath( horizFlipSVGPath( paths[3][0] ), 0.75 ),
        lpath0 = scaleSVGPath( paths[0][0], 0.6 ),
        lpath1 = scaleSVGPath( paths[1][0], 0.6 ),
        lpath2 = scaleSVGPath( paths[2][0], 0.6 ),
        lpath3 = scaleSVGPath( paths[3][0], 0.6 ),
        group2 = createSVGGroup( svgDoc, {
          transform: 'translate(-330,100)'
        } ),
        group = createSVGGroup( svgDoc, {
          transform: 'translate(1330,150)'
        } ),
        bunny0 = createSVGPath( group, lpath0, colors.bunny0[0], 4, colors.bunny0[1] ),
        bunny1 = createSVGPath( group2, rpath0, colors.bunny0[0], 4, colors.bunny0[1] ),
        foo;
        elems.push( bunny0 );
        elems.push( bunny1 );
        elems.push( group );
        anims.push(
          createSVGAnim( bunny0, t, 1100, 'indefinite', 'd', [
            lpath0,
            lpath1,
            lpath2,
            lpath3
          ].join(';')+';' )
        );
        anims.push(
          createSVGAnim( bunny1, t, 1100, 'indefinite', 'd', [
            rpath0,
            rpath1,
            rpath2,
            rpath3
          ].join(';')+';' )
        );
        anims.push( createSVGMoveAnim( group, t, 2200, 0, '1500,'+top, '-330,'+top ) );
        anims.push( createSVGMoveAnim( group2, t+500, 2200, 0, '-330,'+(top+50), '1330,'+(top+50) ) );
        var kill = function(){
          for( i in elems ){ removeElem( elems[i] ); }
          for( i in anims ){ removeElem( anims[i] ); }
        };
        if( selfKill ){
          setTimeout( kill, 4000 );
        }
        else {
          return kill;
        }
      }
    },
/** end **/
    // reloads the page
    end: {
      init: function(t){
        window.location.reload(true);
      }
    }
/** timeline1 **/
  };
  devel && setStyles( svgDoc, {
    borderRight: '1px solid #fc0',
    borderBottom: '1px solid #fc0'
  } );
/** footer **/
});
})();

</script></head><body></body></html>
